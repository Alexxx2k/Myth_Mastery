<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–ú–æ–∏ –∑–∞–∫–∞–∑—ã - MythMastery</title>
    <link rel="stylesheet" th:href="@{/css/tablesPages.css}">
    <link rel="stylesheet" th:href="@{/css/userOrders.css}">
</head>
<body>
<div class="user-orders-container">
    <a th:href="@{/}" class="user-back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>

    <div class="user-info-bar">
        <div class="user-info-text">
            <h1 class="user-orders-title">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h1>
            <div class="user-email">
                –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <strong th:text="${customerEmail}"></strong>
            </div>
        </div>
        <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ê –°–°–´–õ–ö–ê -->
        <a th:href="@{/buy-products/new}" class="user-action-btn user-action-btn-success">‚ûï –ù–æ–≤—ã–π –∑–∞–∫–∞–∑</a>
    </div>

    <div th:if="${message}"
         th:class="${'success'.equals(messageType)} ? 'user-message user-success' : 'user-message user-error'"
         th:text="${message}">
    </div>

    <div th:if="${#lists.isEmpty(buyList)}" class="empty-state">
        <div class="empty-state-icon">üì¶</div>
        <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h3>
        <p>–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
        <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ê –°–°–´–õ–ö–ê -->
        <a th:href="@{/buy-products/new}" class="user-action-btn user-action-btn-success" style="margin-top: 20px; padding: 12px 30px;">
            –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑
        </a>
    </div>

    <div th:each="buy : ${buyList}" class="order-card">
        <div class="order-header">
            <div>
                <div class="order-id">–ó–∞–∫–∞–∑ #<span th:text="${buy.id}"></span></div>
            </div>
            <div>

                <span class="order-status status-processing" th:if="${buy.buyStepId != null && buy.buyStepId != 1}">
                    –®–∞–≥ #<span th:text="${buy.buyStepId}"></span>
                </span>
            </div>
        </div>

        <div th:if="${buy.description != null && !buy.description.isEmpty()}"
             class="order-description">
            <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong>
            <span th:text="${buy.description}"></span>
        </div>
        <div th:unless="${buy.description != null && !buy.description.isEmpty()}"
             class="order-description empty">
            –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
        </div>

        <div class="order-actions">
            <a th:href="@{'/buy-products/by-buy/' + ${buy.id}}" class="btn-view-products">
                üìã –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ
            </a>
        </div>

    </div>

    <div th:if="${!#lists.isEmpty(buyList)}" class="create-new-section">
        <a th:href="@{/buy-products/new}" class="user-action-btn">–°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω –∑–∞–∫–∞–∑</a>
    </div>
</div>

<style>
    .order-actions {
        margin: 15px 0;
        padding: 10px 0;
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
    }

    .btn-view-products {
        display: inline-block;
        padding: 8px 15px;
        background-color: #f8f9fa;
        color: #007bff;
        text-decoration: none;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        font-size: 0.9em;
        transition: all 0.3s;
    }

    .btn-view-products:hover {
        background-color: #e9ecef;
        text-decoration: underline;
    }
</style>
</body>
</html>
