# 2GIS Geocoder API — описание

**2GIS Geocoder API** используется для прямого и обратного геокодирования: получения координат по адресу и адреса по координатам.

Базовый URL:

```
https://catalog.api.2gis.com
```
---

## Назначение API

Geocoder API позволяет:

* **Прямое геокодирование** — получить координаты объекта по адресу или названию
* **Обратное геокодирование** — получить адрес и информацию об объекте по координатам

Все запросы выполняются методом **GET**, ответы возвращаются в формате **JSON**.

---

## Авторизация

Для работы с API требуется **API-ключ 2GIS**.

### Получение ключа

1. Войти в **Platform Manager** 2GIS
2. Создать demo-ключ или приобрести подписку
3. Использовать ключ в параметре `key`

```
key=YOUR_API_KEY
```


---

## Общая структура запросов

```
GET /3.0/items/geocode?{params}
```

### Обязательные параметры (один из вариантов)

| Параметр      | Описание                                           |
| ------------- | -------------------------------------------------- |
| `q`           | Адрес или название объекта (прямое геокодирование) |
| `lat` + `lon` | Координаты точки (обратное геокодирование)         |

### Общие параметры

| Параметр | Тип    | Описание                    |
| -------- | ------ | --------------------------- |
| `key`    | string | API-ключ 2GIS               |
| `fields` | string | Список дополнительных полей |

---

## Типы геокодирования

## Прямое геокодирование (по адресу)

Используется для получения координат объекта по адресу или названию.

### Запрос

```
GET /3.0/items/geocode?q={address}&key={API_KEY}
```

### Пример

```
https://catalog.api.2gis.com/3.0/items/geocode?q=Moscow, Sadovnicheskaya, 25&fields=items.point&key=YOUR_KEY
```

### Ответ

```json
{
  "meta": {
    "api_version": "3.0.426762",
    "code": 200,
    "issue_date": "20200506"
  },
  "result": {
    "items": [
      {
        "id": "4504235282713264_...",
        "name": "Sadovnicheskaya 25",
        "full_name": "Moscow, Sadovnicheskaya, 25",
        "address_name": "Sadovnicheskaya, 25",
        "type": "building",
        "purpose_name": "Residential building with administrative premises",
        "point": {
          "lat": 55.746397,
          "lon": 37.634369
        }
      }
    ],
    "total": 1
  }
}
```

---

## Обратное геокодирование (по координатам)

Используется для определения адреса и объекта, расположенного ближе всего к указанной точке.

### Запрос

```
GET /3.0/items/geocode?lat={lat}&lon={lon}&key={API_KEY}
```

### Пример

```
https://catalog.api.2gis.com/3.0/items/geocode?lat=55.751508&lon=37.615666&fields=items.point&key=YOUR_KEY
```

### Ответ

```json
{
  "meta": {
    "api_version": "3.0.427735",
    "code": 200,
    "issue_date": "20200506"
  },
  "result": {
    "items": [
      {
        "id": "4504235282815753_...",
        "name": "State Kremlin Palace",
        "full_name": "Moscow, State Kremlin Palace",
        "address_name": "Kremlin, 1x",
        "building_name": "State Kremlin Palace",
        "type": "building",
        "purpose_name": "Cultural institution",
        "point": {
          "lat": 55.75142,
          "lon": 37.615606
        }
      }
    ],
    "total": 1
  }
}
```

---

## Параметр `fields`

Параметр `fields` используется для запроса **дополнительной информации** об объектах.

```
fields=items.point,items.address
```
### Примеры платных полей

* `items.contact_groups` — контакты организации
* `items.floors` — количество этажей
* `items.employees_org_count` — число сотрудников
* `items.itin` — ИНН
* `items.fias_code` — код ФИАС
* `items.okato`, `items.oktmo` — классификаторы
* `items.structure_info.*` — информация о здании (год постройки, материал, этажность и т.д.)

Если доступ к полю не оплачен — оно будет проигнорировано в ответе.

---

## Структура ответа

### Meta

| Поле          | Описание        |
| ------------- | --------------- |
| `api_version` | Версия API      |
| `code`        | HTTP-код ответа |
| `issue_date`  | Дата сборки     |

### Result

| Поле    | Описание                     |
| ------- | ---------------------------- |
| `items` | Массив найденных объектов    |
| `total` | Общее количество результатов |

---

## Object (item)

| Поле           | Описание                                                 |
| -------------- | -------------------------------------------------------- |
| `id`           | Уникальный идентификатор объекта                         |
| `name`         | Краткое название                                         |
| `full_name`    | Полное название с адресом                                |
| `address_name` | Адрес без города                                         |
| `type`         | Тип объекта (`building`, `organization`, `street` и др.) |
| `purpose_name` | Назначение объекта                                       |
| `point.lat`    | Широта                                                   |
| `point.lon`    | Долгота                                                  |

---

## Ограничения и особенности

* API поддерживает **только GET-запросы**
* Требуется обязательный API-ключ
* Лимиты и тарифы зависят от подписки
* Часть данных доступна только по договору
* Геокодирование возвращает **наиболее релевантные объекты**, не гарантируя точного совпадения

---

## Примечания

* API подходит для автодополнения адресов, pin-drop, reverse lookup
* Для расширенных сценариев рекомендуется использовать Search API 2GIS

---

Источник: официальная документация 2GIS Geocoder API
